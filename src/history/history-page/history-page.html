<div class="header">
    <span class="header-label">ประวัติการใช้งาน</span>
    <span class="sub-content-label">ตรวจสอบประวัติการใช้งานของคุณ</span>
    <div class="content">
        <p-button label="รีเฟรช" [icon]="isLoading ? 'pi pi-spin pi-spinner' : 'pi pi-refresh'"
            (click)="refreshHistory()" [disabled]="isLoading" severity="contrast" class="mb-3">
        </p-button>

        <p-table [value]="historyData" [paginator]="true" [rows]="5" [rowsPerPageOptions]="[5,10,25]"
            responsiveLayout="scroll" class="p-datatable-sm">

            <!-- HEADER -->
            <ng-template pTemplate="header">
                <tr>
                    <th>วันที่</th>
                    <th>เวลา</th>
                    <th>แพลตฟอร์ม</th>
                    <th>ลิงก์</th>
                </tr>
            </ng-template>

            <!-- BODY -->
            <ng-template pTemplate="body" let-row>
                <tr>
                    <td>{{ row.Date | date:'d/M/yyyy' }}</td>
                    <td>{{ row.Time }}</td>
                    <td>{{ row.Platform }}</td>
                    <td>
                        <a *ngIf="row.Url; else noLink" [href]="row.Url" target="_blank" rel="noopener noreferrer"
                            class="text-blue-500 hover:underline">
                            เปิดลิงก์
                        </a>
                        <ng-template #noLink>-</ng-template>
                    </td>
                </tr>
            </ng-template>

            <!-- EMPTY -->
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="4">
                        <div class="flex flex-column align-items-center justify-content-center gap-2 p-4 text-500">
                            <i class="pi pi-inbox text-5xl"></i>
                            <span>ไม่พบข้อมูล</span>
                        </div>
                    </td>
                </tr>
            </ng-template>

        </p-table>
    </div>
</div>